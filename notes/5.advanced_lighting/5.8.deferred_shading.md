# 延迟着色

很容易发现目前的着色流程（forward shading）复杂度相当高而且浪费：每个物体上的片段对每个光源都要做一次着色，大部分完成着色的片段最后还会因为在屏幕上重合而被覆盖掉。如果不考虑非常真实的全局光，这样的流程有非常大的优化空间。

延迟着色（deferred shading）通过推迟高消耗的渲染过程来降低总体的渲染复杂度，通常包括两个阶段。首先是几何阶段（geometry pass），场景的位置、颜色、法向量等几何信息通过 MRT 被写到一系列纹理（G-buffer）中；接着是着色阶段（lighting pass），此阶段和前向渲染的工作差不多，但是只利用 G-buffer 中的数据逐像素渲染。

deferred shading 的优点是着色复杂度与场景内容的关系减少，缺点是需要若干张大号高精度纹理占用内存、lighting pass 只能接触到深度最小的片段、MSAA 无法使用等。不过也有各种各样奇怪的方案可以重现这些特性。

deferred shading 也可以理解成一个比较严格的着色流水线。

