# Bloom

让发光的地方看起来“真的在发光”。感觉像是个纯 hack 的特性，让光源看起来有泛光和眩光效果。严格来说这些现象都是由空气介质或相机镜头特性导致的。需要 bloom 的最大理由应该是 SDR 设备对光亮的表现实在太弱了。

实现方法很简单：把亮部提取出来，模糊化之后再叠回去。

用到了一个新东西：Multiple Rendering Targets，使用类似顶点着色器输入变量的方式可以指定多个输出（到多个缓冲），着色器内指定布局时的数字就是将纹理附加到缓冲时指定的 `GL_COLOR_ATTACHMENTX`。同时要使用 `glDrawBuffers()` 。


## 其他问题

一个很弱智的点：场景和表示光源的小立方体是分开绘制的，但都要写入两个缓冲中，因此两个着色器里都要指定多个输出并且写一遍逻辑。

clear color 时最好用黑色，否则按照目前的逻辑，背景色在开启 bloom 时会被重复计算。使用其他颜色的时候需要通过在着色器里判断并 discard 掉。